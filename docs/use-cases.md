# Use Cases, Edge Cases и Corner Cases

## Детализированный список use cases

### Use Case 1: Регистрация и вход пользователя

- **Описание**: Пользователь регистрируется в системе или входит в существующий аккаунт
- **Действующие лица**: Пользователь
- **Предусловия**: Пользователь не авторизован в системе
- **Постусловия**: Пользователь авторизован и перенаправлен на главную страницу
- **Основной сценарий**:
  1. Пользователь открывает страницу регистрации/входа
  2. Пользователь вводит имя пользователя и пароль
  3. Система проверяет данные
  4. Если пользователь новый, система создает аккаунт
  5. Если пользователь существует, система проверяет пароль
  6. Система авторизует пользователя и перенаправляет на главную страницу
- **Альтернативные сценарии**:
  - Если данные введены некорректно, система показывает сообщение об ошибке
  - Если пользователь забыл пароль, система предлагает восстановление

### Use Case 2: Настройка профиля пользователя

- **Описание**: Пользователь настраивает свой профиль, указывая начальные данные
- **Действующие лица**: Пользователь
- **Предусловия**: Пользователь авторизован в системе
- **Постусловия**: Профиль пользователя настроен с указанными данными
- **Основной сценарий**:
  1. Пользователь переходит на страницу настроек
  2. Пользователь вводит начальный вес, целевой вес и другие параметры
  3. Пользователь сохраняет настройки
  4. Система обновляет профиль пользователя
- **Альтернативные сценарии**:
  - Если данные введены некорректно, система показывает сообщение об ошибке
  - Если пользователь отменяет изменения, система не обновляет профиль

### Use Case 3: Отметка выполнения привычки

- **Описание**: Пользователь отмечает выполнение привычки и получает опыт
- **Действующие лица**: Пользователь
- **Предусловия**: Пользователь авторизован в системе
- **Постусловия**: Привычка отмечена как выполненная, пользователь получает опыт
- **Основной сценарий**:
  1. Пользователь переходит на главную страницу
  2. Пользователь выбирает привычку и нажимает кнопку "Отметить"
  3. Система обновляет статус привычки
  4. Система начисляет опыт пользователю
  5. Система проверяет, достаточно ли опыта для повышения уровня
  6. Если опыта достаточно, система повышает уровень пользователя
  7. Система отображает анимацию получения опыта и повышения уровня
- **Альтернативные сценарии**:
  - Если привычка уже отмечена сегодня, система показывает сообщение об этом
  - Если произошла ошибка, система показывает сообщение об ошибке

### Use Case 4: Создание задачи

- **Описание**: Пользователь создает новую задачу
- **Действующие лица**: Пользователь
- **Предусловия**: Пользователь авторизован в системе
- **Постусловия**: Новая задача создана и добавлена в список задач пользователя
- **Основной сценарий**:
  1. Пользователь переходит на страницу задач
  2. Пользователь нажимает кнопку "Создать задачу"
  3. Пользователь вводит название, описание и выбирает размер задачи
  4. Пользователь сохраняет задачу
  5. Система создает новую задачу и добавляет ее в список задач пользователя
- **Альтернативные сценарии**:
  - Если данные введены некорректно, система показывает сообщение об ошибке
  - Если пользователь отменяет создание, система не создает задачу

### Use Case 5: Выполнение задачи

- **Описание**: Пользователь отмечает задачу как выполненную и получает опыт
- **Действующие лица**: Пользователь
- **Предусловия**: Пользователь авторизован в системе, задача существует и не выполнена
- **Постусловия**: Задача отмечена как выполненная, пользователь получает опыт
- **Основной сценарий**:
  1. Пользователь переходит на страницу задач
  2. Пользователь выбирает задачу и нажимает кнопку "Выполнить"
  3. Система обновляет статус задачи
  4. Система начисляет опыт пользователю в зависимости от размера задачи
  5. Система проверяет, достаточно ли опыта для повышения уровня
  6. Если опыта достаточно, система повышает уровень пользователя
  7. Система отображает анимацию получения опыта и повышения уровня
- **Альтернативные сценарии**:
  - Если задача уже выполнена, система показывает сообщение об этом
  - Если произошла ошибка, система показывает сообщение об ошибке

### Use Case 6: Просмотр статистики

- **Описание**: Пользователь просматривает статистику по привычкам и задачам
- **Действующие лица**: Пользователь
- **Предусловия**: Пользователь авторизован в системе
- **Постусловия**: Пользователь видит статистику
- **Основной сценарий**:
  1. Пользователь переходит на страницу статистики
  2. Система отображает статистику по привычкам и задачам
  3. Пользователь может фильтровать статистику по периоду
- **Альтернативные сценарии**:
  - Если статистика недоступна, система показывает сообщение об этом
  - Если произошла ошибка, система показывает сообщение об ошибке

### Use Case 7: Получение достижения

- **Описание**: Пользователь получает достижение за выполнение определенных условий
- **Действующие лица**: Пользователь
- **Предусловия**: Пользователь авторизован в системе, условия для получения достижения выполнены
- **Постусловия**: Пользователь получает достижение и дополнительный опыт
- **Основной сценарий**:
  1. Пользователь выполняет действие, которое приводит к выполнению условий достижения
  2. Система проверяет условия достижения
  3. Система добавляет достижение в список достижений пользователя
  4. Система начисляет дополнительный опыт пользователю
  5. Система отображает уведомление о получении достижения
- **Альтернативные сценарии**:
  - Если достижение уже получено, система не выполняет никаких действий
  - Если произошла ошибка, система показывает сообщение об ошибке

### Use Case 8: Сброс прогресса

- **Описание**: Пользователь сбрасывает свой прогресс и начинает заново
- **Действующие лица**: Пользователь
- **Предусловия**: Пользователь авторизован в системе
- **Постусловия**: Прогресс пользователя сброшен, уровень и опыт сброшены до начальных значений
- **Основной сценарий**:
  1. Пользователь переходит на страницу настроек
  2. Пользователь нажимает кнопку "Сбросить прогресс"
  3. Система запрашивает подтверждение
  4. Пользователь подтверждает сброс
  5. Система сбрасывает прогресс пользователя
  6. Система перенаправляет пользователя на главную страницу
- **Альтернативные сценарии**:
  - Если пользователь отменяет сброс, система не выполняет никаких действий
  - Если произошла ошибка, система показывает сообщение об ошибке

## Автотесты для каждого use case

### Тесты для Use Case 1: Регистрация и вход пользователя

1. **Тест 1.1**: Проверка успешной регистрации нового пользователя
   - **Входные данные**: Имя пользователя "testuser", пароль "password123"
   - **Ожидаемый результат**: Пользователь создан, авторизован и перенаправлен на главную страницу
   - **Критерии прохождения**: Статус ответа 200, наличие токена авторизации, перенаправление на главную страницу

2. **Тест 1.2**: Проверка успешного входа существующего пользователя
   - **Входные данные**: Имя пользователя "testuser", пароль "password123"
   - **Ожидаемый результат**: Пользователь авторизован и перенаправлен на главную страницу
   - **Критерии прохождения**: Статус ответа 200, наличие токена авторизации, перенаправление на главную страницу

3. **Тест 1.3**: Проверка ошибки при вводе неверного пароля
   - **Входные данные**: Имя пользователя "testuser", пароль "wrongpassword"
   - **Ожидаемый результат**: Ошибка авторизации
   - **Критерии прохождения**: Статус ответа 401, сообщение об ошибке "Неверный пароль"

### Тесты для Use Case 2: Настройка профиля пользователя

1. **Тест 2.1**: Проверка успешного обновления профиля
   - **Входные данные**: Начальный вес 80, целевой вес 70, уведомления включены
   - **Ожидаемый результат**: Профиль обновлен с указанными данными
   - **Критерии прохождения**: Статус ответа 200, обновленные данные в ответе

2. **Тест 2.2**: Проверка ошибки при вводе некорректных данных
   - **Входные данные**: Начальный вес -10, целевой вес 0
   - **Ожидаемый результат**: Ошибка валидации данных
   - **Критерии прохождения**: Статус ответа 400, сообщение об ошибке валидации

### Тесты для Use Case 3: Отметка выполнения привычки

1. **Тест 3.1**: Проверка успешной отметки выполнения привычки
   - **Входные данные**: ID привычки 1
   - **Ожидаемый результат**: Привычка отмечена как выполненная, пользователь получает опыт
   - **Критерии прохождения**: Статус ответа 200, обновленные данные привычки и пользователя

2. **Тест 3.2**: Проверка повышения уровня при получении достаточного количества опыта
   - **Входные данные**: ID привычки 1, текущий опыт пользователя 95, опыт за привычку 10
   - **Ожидаемый результат**: Привычка отмечена как выполненная, уровень пользователя повышен
   - **Критерии прохождения**: Статус ответа 200, уровень пользователя увеличен на 1

3. **Тест 3.3**: Проверка ошибки при повторной отметке выполнения привычки в тот же день
   - **Входные данные**: ID привычки 1, привычка уже отмечена сегодня
   - **Ожидаемый результат**: Ошибка повторной отметки
   - **Критерии прохождения**: Статус ответа 400, сообщение об ошибке "Привычка уже отмечена сегодня"

### Тесты для Use Case 4: Создание задачи

1. **Тест 4.1**: Проверка успешного создания задачи
   - **Входные данные**: Название "Тестовая задача", описание "Описание тестовой задачи", размер "medium"
   - **Ожидаемый результат**: Задача создана и добавлена в список задач пользователя
   - **Критерии прохождения**: Статус ответа 201, данные созданной задачи в ответе

2. **Тест 4.2**: Проверка ошибки при создании задачи с пустым названием
   - **Входные данные**: Название "", описание "Описание тестовой задачи", размер "medium"
   - **Ожидаемый результат**: Ошибка валидации данных
   - **Критерии прохождения**: Статус ответа 400, сообщение об ошибке валидации

### Тесты для Use Case 5: Выполнение задачи

1. **Тест 5.1**: Проверка успешного выполнения задачи
   - **Входные данные**: ID задачи 1
   - **Ожидаемый результат**: Задача отмечена как выполненная, пользователь получает опыт
   - **Критерии прохождения**: Статус ответа 200, обновленные данные задачи и пользователя

2. **Тест 5.2**: Проверка получения разного количества опыта в зависимости от размера задачи
   - **Входные данные**: ID задачи 1 (размер "small"), ID задачи 2 (размер "medium"), ID задачи 3 (размер "large")
   - **Ожидаемый результат**: Задачи отмечены как выполненные, пользователь получает разное количество опыта
   - **Критерии прохождения**: Статус ответа 200, разное количество опыта в зависимости от размера задачи

3. **Тест 5.3**: Проверка ошибки при выполнении уже выполненной задачи
   - **Входные данные**: ID задачи 1, задача уже выполнена
   - **Ожидаемый результат**: Ошибка повторного выполнения
   - **Критерии прохождения**: Статус ответа 400, сообщение об ошибке "Задача уже выполнена"

### Тесты для Use Case 6: Просмотр статистики

1. **Тест 6.1**: Проверка успешного получения статистики
   - **Входные данные**: ID пользователя
   - **Ожидаемый результат**: Статистика по привычкам и задачам пользователя
   - **Критерии прохождения**: Статус ответа 200, данные статистики в ответе

2. **Тест 6.2**: Проверка фильтрации статистики по периоду
   - **Входные данные**: ID пользователя, период "week"
   - **Ожидаемый результат**: Статистика по привычкам и задачам пользователя за неделю
   - **Критерии прохождения**: Статус ответа 200, данные статистики за неделю в ответе

### Тесты для Use Case 7: Получение достижения

1. **Тест 7.1**: Проверка получения достижения "7 дней без игр"
   - **Входные данные**: ID пользователя, daysWithoutGames = 7
   - **Ожидаемый результат**: Достижение добавлено в список достижений пользователя, пользователь получает дополнительный опыт
   - **Критерии прохождения**: Статус ответа 200, наличие достижения в списке достижений пользователя

2. **Тест 7.2**: Проверка отсутствия повторного получения достижения
   - **Входные данные**: ID пользователя, daysWithoutGames = 8, достижение "7 дней без игр" уже получено
   - **Ожидаемый результат**: Достижение не добавляется повторно, пользователь не получает дополнительный опыт
   - **Критерии прохождения**: Статус ответа 200, отсутствие изменений в списке достижений пользователя

### Тесты для Use Case 8: Сброс прогресса

1. **Тест 8.1**: Проверка успешного сброса прогресса
   - **Входные данные**: ID пользователя, подтверждение сброса
   - **Ожидаемый результат**: Прогресс пользователя сброшен, уровень и опыт сброшены до начальных значений
   - **Критерии прохождения**: Статус ответа 200, сброшенные данные пользователя в ответе

2. **Тест 8.2**: Проверка сохранения некоторых настроек при сбросе прогресса
   - **Входные данные**: ID пользователя, подтверждение сброса
   - **Ожидаемый результат**: Прогресс пользователя сброшен, но некоторые настройки (начальный вес, целевой вес, уведомления) сохранены
   - **Критерии прохождения**: Статус ответа 200, сохраненные настройки в ответе

## Автотесты для edge cases и corner cases

### Edge Cases

1. **Тест E1**: Проверка обработки очень большого количества опыта
   - **Условия**: Пользователь получает очень большое количество опыта (например, 10000)
   - **Входные данные**: ID пользователя, опыт = 10000
   - **Ожидаемый результат**: Система корректно обрабатывает большое количество опыта, повышает уровень пользователя соответствующим образом

2. **Тест E2**: Проверка обработки очень большого количества задач
   - **Условия**: У пользователя очень много задач (например, 1000)
   - **Входные данные**: ID пользователя, 1000 задач
   - **Ожидаемый результат**: Система корректно отображает и обрабатывает большое количество задач

3. **Тест E3**: Проверка обработки очень длинных названий задач
   - **Условия**: Пользователь создает задачу с очень длинным названием (например, 1000 символов)
   - **Входные данные**: Название задачи длиной 1000 символов
   - **Ожидаемый результат**: Система корректно обрабатывает и отображает длинное название задачи или обрезает его до допустимой длины

4. **Тест E4**: Проверка обработки очень высокого уровня пользователя
   - **Условия**: Пользователь достигает очень высокого уровня (например, 100)
   - **Входные данные**: ID пользователя, уровень = 100
   - **Ожидаемый результат**: Система корректно отображает высокий уровень пользователя и рассчитывает необходимый опыт для следующего уровня

### Corner Cases

1. **Тест C1**: Проверка обработки одновременного выполнения нескольких задач
   - **Условия**: Пользователь одновременно отмечает выполнение нескольких задач
   - **Входные данные**: ID пользователя, ID задач [1, 2, 3]
   - **Ожидаемый результат**: Система корректно обрабатывает одновременное выполнение нескольких задач, начисляет опыт за каждую задачу

2. **Тест C2**: Проверка обработки одновременного получения нескольких достижений
   - **Условия**: Пользователь одновременно выполняет условия для получения нескольких достижений
   - **Входные данные**: ID пользователя, условия для достижений "7 дней без игр" и "Первый продукт"
   - **Ожидаемый результат**: Система корректно обрабатывает одновременное получение нескольких достижений, начисляет опыт за каждое достижение

3. **Тест C3**: Проверка обработки сброса прогресса при наличии незавершенных задач
   - **Условия**: Пользователь сбрасывает прогресс, имея незавершенные задачи
   - **Входные данные**: ID пользователя, подтверждение сброса, наличие незавершенных задач
   - **Ожидаемый результат**: Система корректно обрабатывает сброс прогресса, удаляет или сохраняет незавершенные задачи в зависимости от настроек

4. **Тест C4**: Проверка обработки изменения целевого веса на уже достигнутый
   - **Условия**: Пользователь изменяет целевой вес на значение, которое уже достигнуто
   - **Входные данные**: ID пользователя, текущий вес = 70, новый целевой вес = 75
   - **Ожидаемый результат**: Система корректно обрабатывает изменение целевого веса, отображает соответствующий прогресс

## Технические автотесты

### Тесты производительности

1. **Тест P1**: Проверка времени загрузки главной страницы
   - **Метрики**: Время загрузки страницы
   - **Условия**: Различные устройства и скорости соединения
   - **Критерии прохождения**: Время загрузки не более 2 секунд на устройствах с хорошим соединением

2. **Тест P2**: Проверка времени отклика API
   - **Метрики**: Время отклика API на различные запросы
   - **Условия**: Различные типы запросов (GET, POST, PUT, DELETE)
   - **Критерии прохождения**: Время отклика не более 500 мс для простых запросов

3. **Тест P3**: Проверка производительности при большом количестве данных
   - **Метрики**: Время загрузки и отображения данных
   - **Условия**: Большое количество задач и привычек (1000+)
   - **Критерии прохождения**: Время загрузки и отображения не более 3 секунд

### Тесты безопасности

1. **Тест S1**: Проверка защиты от SQL-инъекций
   - **Цель**: Убедиться, что система защищена от SQL-инъекций
   - **Методика**: Попытка внедрения SQL-кода в поля ввода
   - **Критерии прохождения**: Система корректно обрабатывает и экранирует вводимые данные

2. **Тест S2**: Проверка защиты от XSS-атак
   - **Цель**: Убедиться, что система защищена от XSS-атак
   - **Методика**: Попытка внедрения JavaScript-кода в поля ввода
   - **Критерии прохождения**: Система корректно обрабатывает и экранирует вводимые данные

3. **Тест S3**: Проверка защиты от CSRF-атак
   - **Цель**: Убедиться, что система защищена от CSRF-атак
   - **Методика**: Попытка выполнения действий от имени пользователя без его ведома
   - **Критерии прохождения**: Система требует подтверждения действий или использует CSRF-токены

### Тесты совместимости

1. **Тест C1**: Проверка совместимости с различными браузерами
   - **Платформы**: Chrome, Firefox, Safari, Edge
   - **Критерии прохождения**: Приложение корректно работает во всех указанных браузерах

2. **Тест C2**: Проверка адаптивности на различных устройствах
   - **Платформы**: Десктоп, планшет, мобильный телефон
   - **Критерии прохождения**: Приложение корректно отображается и работает на всех указанных устройствах

3. **Тест C3**: Проверка совместимости с различными версиями API
   - **Платформы**: Различные версии API (v1, v2)
   - **Критерии прохождения**: Приложение корректно работает со всеми поддерживаемыми версиями API 